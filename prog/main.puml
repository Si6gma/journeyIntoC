@startuml main
[*] --> USER_DISCONNECTED

USER_DISCONNECTED --> USER_CONNECTED : User connects
USER_CONNECTED --> USER_ACTIVE : User starts activity
USER_CONNECTED --> USER_DISCONNECTED : User disconnects

state USER_ACTIVE {
    [*] --> USER_ACTIVITY_NONE
    USER_ACTIVITY_NONE --> USER_ACTIVITY_ENTERTAINMENT : Start entertainment
    USER_ACTIVITY_NONE --> USER_ACTIVITY_SHOPPING : Start shopping
    USER_ACTIVITY_NONE --> USER_ACTIVITY_MAP : Start map activity

    state USER_ACTIVITY_ENTERTAINMENT {
        [*] --> USER_ENTERTAINMENT_NONE
        USER_ENTERTAINMENT_NONE --> USER_ENTERTAINMENT_PLAYING : Start playing
        USER_ENTERTAINMENT_PLAYING --> USER_ENTERTAINMENT_PAUSE : Pause
        USER_ENTERTAINMENT_PLAYING --> USER_ENTERTAINMENT_FORWARD : Forward
        USER_ENTERTAINMENT_PLAYING --> USER_ENTERTAINMENT_REVERSE : Reverse
        USER_ENTERTAINMENT_PAUSE --> USER_ENTERTAINMENT_PLAYING : Resume playing
        USER_ENTERTAINMENT_FORWARD --> USER_ENTERTAINMENT_PLAYING : Stop forwarding
        USER_ENTERTAINMENT_REVERSE --> USER_ENTERTAINMENT_PLAYING : Stop reversing
        USER_ENTERTAINMENT_PLAYING --> USER_ENTERTAINMENT_NONE : Stop entertainment
    }

    state USER_ACTIVITY_SHOPPING {
        [*] --> USER_SHOPPING_NONE
        USER_SHOPPING_NONE --> USER_SHOPPING_SEARCHING : Start searching
        USER_SHOPPING_SEARCHING --> USER_SHOPPING_CART : Add to cart
        USER_SHOPPING_CART --> USER_SHOPPING_PURCHASING : Proceed to purchase
        USER_SHOPPING_CART --> USER_SHOPPING_SEARCHING : Go back to search
        USER_SHOPPING_PURCHASING --> USER_SHOPPING_NONE : Complete purchase
        USER_SHOPPING_NONE --> USER_SHOPPING_NONE : Stop shopping
    }

    USER_ACTIVITY_NONE --> USER_ACTIVE : Stop activity
    USER_ACTIVITY_ENTERTAINMENT --> USER_ACTIVITY_NONE : End entertainment
    USER_ACTIVITY_SHOPPING --> USER_ACTIVITY_NONE : End shopping
    USER_ACTIVITY_MAP --> USER_ACTIVITY_NONE : End map
}

USER_ACTIVE --> USER_CONNECTED : Stop activity
USER_CONNECTED --> USER_DISCONNECTED : User disconnects

USER_DISCONNECTED --> [*] : End
@enduml
